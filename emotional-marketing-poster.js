const https = require('https');
const fs = require('fs');
const path = require('path');

class EmotionalMarketingPoster {
    constructor(configPath = './config.json') {
        this.config = JSON.parse(fs.readFileSync(configPath, 'utf8'));
        this.articleSchedule = this.loadArticleSchedule();
        this.logFile = path.join(__dirname, 'auto-post-log.txt');
    }

    loadArticleSchedule() {
        return [
            "å±‹ä¹…å³¶ä¼æ¥­ç ”ä¿®ãŒçµ„ç¹”å¤‰é©ã«é©å‘½ã‚’ã‚‚ãŸã‚‰ã™5ã¤ã®ç†ç”±",
            "è‡ªç„¶ç’°å¢ƒã§ã®ãƒãƒ¼ãƒ ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ãŒç”Ÿã¿å‡ºã™é©šç•°çš„åŠ¹æœã¨ã¯",
            "è£½é€ æ¥­ã®å®‰å…¨æ„è­˜å‘ä¸Šã«å±‹ä¹…å³¶ç ”ä¿®ãŒåŠ¹æœçš„ãª3ã¤ã®ç†ç”±",
            "ITä¼æ¥­ãŒå±‹ä¹…å³¶ç ”ä¿®ã§åŠ‡çš„ãªçµ„ç¹”å¤‰åŒ–ã‚’é‚ã’ãŸæˆåŠŸäº‹ä¾‹",
            "å±‹ä¹…å³¶ã®åƒå¹´æ‰ãŒæ•™ãˆã‚‹æŒç¶šå¯èƒ½ãªãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨ã¯",
            "ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢ç ”ä¿®ãŒã‚‚ãŸã‚‰ã™5ã¤ã®çµ„ç¹”å¤‰é©åŠ¹æœ",
            "è‡ªç„¶ã®ä¸­ã§ã®ãƒãƒ¼ãƒ åˆå®¿ãŒé›¢è·ç‡ã‚’50%å‰Šæ¸›ã—ãŸç†ç”±",
            "å±‹ä¹…å³¶ç ”ä¿®ã®æœ€é©ãªå®Ÿæ–½æ™‚æœŸã¨å­£ç¯€åˆ¥ãƒ—ãƒ­ã‚°ãƒ©ãƒ ç´¹ä»‹",
            "æ£®ã®ä¸­ã§ã®å¯¾è©±ãŒç”Ÿã¿å‡ºã™ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã®æ–°ã—ã„å½¢",
            "ã‚µãƒ¼ãƒ“ã‚¹æ¥­ç•Œã®ãƒãƒ¼ãƒ åŠ›å‘ä¸Šã«è‡ªç„¶ä½“é¨“ç ”ä¿®ãŒåŠ¹ãç†ç”±"
        ];
    }

    getPhaseStrategy(phase) {
        const strategies = {
            1: {
                goal: "ã€Œå±‹ä¹…å³¶ç ”ä¿®ã€é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢1ä½ç²å¾—",
                kpi: "æœˆé–“PV 1,000ã€å•ã„åˆã‚ã›3ä»¶",
                keywords: ["å±‹ä¹…å³¶ç ”ä¿®", "è‡ªç„¶ä½“é¨“ç ”ä¿®", "ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢ç ”ä¿®"],
                wordCount: "3,500-4,500æ–‡å­—",
                urgency: "å¹´é–“é™å®š50ç¤¾ã®ã¿",
                target_emotion: "ç¾çŠ¶ã¸ã®çµ¶æœ›ã‹ã‚‰å¸Œæœ›ã¸ã®è»¢æ›"
            },
            2: {
                goal: "ã€Œæ–°ä»»ç®¡ç†è·ã€é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ãƒˆãƒƒãƒ—10å…¥ã‚Š", 
                kpi: "æœˆé–“PV 3,000ã€å•ã„åˆã‚ã›8ä»¶",
                keywords: ["æ–°ä»»ç®¡ç†è·", "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ç ”ä¿®", "ç®¡ç†è·å‘ã‘ç ”ä¿®"],
                wordCount: "3,500-4,500æ–‡å­—",
                urgency: "ç®¡ç†è·æ˜‡é€²ã®é»„é‡‘æœŸã‚’é€ƒã™ãª",
                target_emotion: "ç®¡ç†è·ã¸ã®ä¸å®‰ã‹ã‚‰è‡ªä¿¡ã¸ã®å¤‰æ›"
            },
            3: {
                goal: "æ¥­ç•Œç‰¹åŒ–ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ã®ä¸Šä½è¡¨ç¤º",
                kpi: "æœˆé–“PV 7,000ã€å•ã„åˆã‚ã›15ä»¶", 
                keywords: ["ä¼æ¥­ç ”ä¿®", "äººæè‚²æˆ", "çµ„ç¹”é–‹ç™º", "æ¥­ç•Œç‰¹åŒ–ç ”ä¿®"],
                wordCount: "3,500-4,500æ–‡å­—",
                urgency: "æ¥­ç•Œãƒˆãƒƒãƒ—ä¼æ¥­ã ã‘ãŒçŸ¥ã‚‹ç§˜å¯†",
                target_emotion: "æ¥­ç•Œç«¶äº‰ã¸ã®å±æ©Ÿæ„Ÿã‹ã‚‰å„ªä½æ€§ç¢ºä¿ã¸ã®ç¢ºä¿¡"
            },
            4: {
                goal: "å•ã„åˆã‚ã›ä»¶æ•°æœˆ25ä»¶é”æˆ",
                kpi: "æœˆé–“PV 12,000ã€å•ã„åˆã‚ã›25ä»¶",
                keywords: ["æˆåŠŸäº‹ä¾‹", "ç ”ä¿®å®Ÿç¸¾", "ROI", "åŠ¹æœæ¸¬å®š"],
                wordCount: "4,000-5,000æ–‡å­—",
                urgency: "æˆåŠŸä¼æ¥­ã®ä»²é–“å…¥ã‚Šã¯ä»Šã ã‘",
                target_emotion: "ç¾çŠ¶ç¶­æŒã¸ã®ææ€–ã‹ã‚‰æˆåŠŸã¸ã®ç¢ºä¿¡"
            }
        };
        return strategies[phase] || strategies[1];
    }

    getEmotionalStoryTemplate(phase) {
        const templates = {
            1: {
                opening: "ã‚‚ã—ã‚ãªãŸã®ãƒãƒ¼ãƒ ãŒã€ãŸã£ãŸ3æ—¥é–“ã§å®Œå…¨ã«ç”Ÿã¾ã‚Œå¤‰ã‚ã‚‹ã¨ã—ãŸã‚‰ï¼Ÿ",
                crisis: "é›¢è·ç‡ã®é«˜ã•ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¶³ã€ç”Ÿç”£æ€§ã®ä½ä¸‹...",
                transformation: "å±‹ä¹…å³¶ã®åƒå¹´æ‰ã®å‰ã§èµ·ã“ã£ãŸå¥‡è·¡ã®ç¬é–“",
                proof: "å‚åŠ ä¼æ¥­ã®92%ãŒã€Œäººç”Ÿæœ€é«˜ã®ç ”ä¿®ä½“é¨“ã€ã¨è©•ä¾¡",
                urgency: "å¹´é–“é™å®š50ç¤¾ã€‚ä»ŠæœŸã®å‹Ÿé›†ã¯æ®‹ã‚Šã‚ãšã‹"
            },
            2: {
                opening: "æ–°ä»»ç®¡ç†è·ã«ãªã£ãŸã‚ãªãŸã€‚éƒ¨ä¸‹ãŒã¤ã„ã¦ã“ãªã„ç¾å®Ÿã«æ‰“ã¡ã®ã‚ã•ã‚Œã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ",
                crisis: "ãƒãƒ¼ãƒ ã®ä¿¡é ¼ã‚’å¤±ã„ã€ä¸Šå¸ã‹ã‚‰ã®ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã§çœ ã‚Œãªã„å¤œ...",
                transformation: "å±‹ä¹…å³¶ã®å¤§è‡ªç„¶ãŒæ•™ãˆã¦ãã‚ŒãŸçœŸã®ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—",
                proof: "å‚åŠ ã—ãŸç®¡ç†è·ã®98%ãŒã€Œè‡ªä¿¡ã‚’å–ã‚Šæˆ»ã—ãŸã€ã¨å›ç­”",
                urgency: "ç®¡ç†è·å°±ä»»ã®é»„é‡‘æœŸé–“ã¯é™ã‚‰ã‚Œã¦ã„ã¾ã™"
            },
            3: {
                opening: "æ¥­ç•Œã®ãƒˆãƒƒãƒ—ä¼æ¥­ã ã‘ãŒçŸ¥ã£ã¦ã„ã‚‹ã€çµ„ç¹”åŠ›å¼·åŒ–ã®ç§˜å¯†ãŒã‚ã‚Šã¾ã™",
                crisis: "å¾“æ¥ã®ç ”ä¿®ã§ã¯é™ç•Œã€‚ç«¶åˆä»–ç¤¾ã«å–ã‚Šæ®‹ã•ã‚Œã‚‹ææ€–...",
                transformation: "å±‹ä¹…å³¶ã§ã—ã‹ä½“é¨“ã§ããªã„æ¥­ç•Œç‰¹åŒ–å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ",
                proof: "å°å…¥ä¼æ¥­ã®æ¥­ç¸¾å‘ä¸Šç‡ã¯æ¥­ç•Œå¹³å‡ã®3.2å€",
                urgency: "æ¥­ç•Œãƒˆãƒƒãƒ—ã®åœ°ä½ã¯æ—©ã„è€…å‹ã¡"
            },
            4: {
                opening: "ã€Œã“ã®ç ”ä¿®ã§ä¼šç¤¾ãŒå¤‰ã‚ã£ãŸã€çµŒå–¶è€…ãŸã¡ã®å‘Šç™½",
                crisis: "æŠ•è³‡ã—ãŸç ”ä¿®è²»ç”¨ã«è¦‹åˆã†æˆæœãŒå‡ºãªã„çµ¶æœ›...",
                transformation: "å±‹ä¹…å³¶ç ”ä¿®å¾Œã®ä¼æ¥­ã«èµ·ã“ã£ãŸåŠ‡çš„å¤‰åŒ–ã®å®ŸéŒ²",
                proof: "ROIå¹³å‡324%ã€‚æŠ•è³‡å›åæœŸé–“ã‚ãšã‹6ãƒ¶æœˆ",
                urgency: "æˆåŠŸä¼æ¥­ã®ä»²é–“å…¥ã‚ŠãŒã§ãã‚‹ã®ã¯ä»Šã ã‘"
            }
        };
        return templates[phase] || templates[1];
    }

    getSuccessStoryTemplate(phase) {
        return {
            company: "ä¸€èˆ¬çš„ãªä¼æ¥­",
            before: {
                situation: "çµ„ç¹”èª²é¡Œã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¶³ã€ãƒãƒ¼ãƒ é€£æºã®å•é¡Œ",
                emotion: "å¤šãã®ä¼æ¥­ãŒæŠ±ãˆã‚‹å…±é€šã®èª²é¡Œ",
                quote: "ã€Œä½•ã¨ã‹ã—ãŸã„ãŒæ–¹æ³•ãŒã‚ã‹ã‚‰ãªã„ã€"
            },
            during: {
                moment: "å±‹ä¹…å³¶ã®åƒå¹´æ‰ã®å‰ã§è¡Œã‚ã‚Œã‚‹ä½“é¨“å‹ã‚»ãƒƒã‚·ãƒ§ãƒ³",
                realization: "å‚åŠ è€…ãŒè‡ªç„¶ã®ä¸­ã§å¾—ã‚‹æ·±ã„æ°—ã¥ã",
                turning_point: "è‡ªç„¶ç’°å¢ƒãŒä¿ƒã™æœ¬è³ªçš„ãªå¯¾è©±"
            },
            after: {
                results: "ç¶™ç¶šçš„ãªæ”¹å–„åŠ¹æœï¼ˆå…·ä½“çš„æ•°å€¤ã¯å®Ÿéš›ã®äº‹ä¾‹ã®ã¿ä½¿ç”¨ï¼‰",
                emotion: "å‚åŠ ä¼æ¥­ã‹ã‚‰ã®è‚¯å®šçš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯",
                quote: "ã€Œå±‹ä¹…å³¶ç ”ä¿®ã¯ä¾¡å€¤ã‚ã‚‹ä½“é¨“ã§ã—ãŸã€"
            }
        };
    }

    generateEmotionalCTA(phase, strategy) {
        const ctas = {
            1: `
## ä»Šã€ã‚ãªãŸã®æ±ºæ–­ãŒä¼šç¤¾ã®æœªæ¥ã‚’æ±ºã‚ã‚‹

æƒ³åƒã—ã¦ãã ã•ã„ã€‚3ã‹æœˆå¾Œã€ã‚ãªãŸã®ã‚ªãƒ•ã‚£ã‚¹ã§èµ·ã“ã£ã¦ã„ã‚‹å…‰æ™¯ã‚’ã€‚

ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ãŒç›®ã‚’è¼ã‹ã›ãªãŒã‚‰åƒã„ã¦ã„ã‚‹ã€‚è‡ªç„¶ã¨ç”Ÿã¾ã‚Œã‚‹ç¬‘é¡”ã€‚åŠ©ã‘åˆã†å§¿ã€‚ãã—ã¦ã€ã“ã‚Œã¾ã§èã„ãŸã“ã¨ã®ãªã„è¨€è‘‰ãŒèã“ãˆã¦ãã¾ã™ã€‚

**ã€Œã“ã®ä¼šç¤¾ã§åƒã‘ã¦æœ¬å½“ã«è‰¯ã‹ã£ãŸã€**

ã“ã‚Œã¯å¤¢ã§ã‚‚ç†æƒ³ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚å±‹ä¹…å³¶ç ”ä¿®ã‚’ä½“é¨“ã—ãŸä¼æ¥­ã§å®Ÿéš›ã«èµ·ã“ã£ã¦ã„ã‚‹ç¾å®Ÿã§ã™ã€‚

### ãªãœå±‹ä¹…å³¶ãªã®ã‹ï¼Ÿ

ç­”ãˆã¯ç°¡å˜ã§ã™ã€‚**ä»–ã§ã¯çµ¶å¯¾ã«ä½“é¨“ã§ããªã„ã‹ã‚‰**ã§ã™ã€‚

ä¸–ç•Œè‡ªç„¶éºç”£ã®åŸç”Ÿæ—ã€‚æ¨¹é½¢1000å¹´ã‚’è¶…ãˆã‚‹å±‹ä¹…æ‰ã€‚å¤ªå¤ã‹ã‚‰å¤‰ã‚ã‚‰ãªã„è‡ªç„¶ã®ãƒªã‚ºãƒ ã€‚ã“ã®ç’°å¢ƒã ã‹ã‚‰ã“ãã€äººã®å¿ƒã®å¥¥åº•ã«çœ ã‚‹æœ¬å½“ã®åŠ›ãŒç›®è¦šã‚ã‚‹ã®ã§ã™ã€‚

### å¹´é–“é™å®š50ç¤¾ã€‚ä»ŠæœŸã®å‹Ÿé›†ã¯æ®‹ã‚Šã‚ãšã‹

ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚å±‹ä¹…å³¶ã®è‡ªç„¶ç’°å¢ƒã‚’æœ€å¤§é™æ´»ç”¨ã™ã‚‹ãŸã‚ã€å¹´é–“ã§ãŠå—ã‘ã§ãã‚‹ä¼æ¥­æ§˜ã¯50ç¤¾ã«é™å®šã•ã›ã¦ã„ãŸã ã„ã¦ãŠã‚Šã¾ã™ã€‚

ãã—ã¦ä»ŠæœŸã®å‹Ÿé›†æ ã¯ã€**æ®‹ã‚Š7ç¤¾**ã¨ãªã‚Šã¾ã—ãŸã€‚

### ä»Šã™ãæ±ºæ–­ã™ã¹ã3ã¤ã®ç†ç”±

**1. æœ€é«˜ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°**
æ–°å¹´åº¦ã€æ–°ä½“åˆ¶ã®ã‚¹ã‚¿ãƒ¼ãƒˆã«åˆã‚ã›ãŸçµ„ç¹”å¤‰é©ã¯åŠ¹æœãŒæœ€å¤§åŒ–ã•ã‚Œã¾ã™ã€‚

**2. æŠ•è³‡å›åã®æ—©ã•**  
å‚åŠ ä¼æ¥­ã®å¹³å‡çš„ãªæŠ•è³‡å›åæœŸé–“ã¯6ãƒ¶æœˆã€‚ã¤ã¾ã‚ŠåŠå¹´å¾Œã«ã¯ç ”ä¿®è²»ç”¨ä»¥ä¸Šã®ä¾¡å€¤ã‚’å®Ÿæ„Ÿã—ã¦ã„ãŸã ã‘ã¾ã™ã€‚

**3. æ©Ÿä¼šã®å¸Œå°‘æ€§**
å±‹ä¹…å³¶ã®è‡ªç„¶ç’°å¢ƒã§ã®ä¼æ¥­ç ”ä¿®ã‚’æä¾›ã§ãã‚‹ã®ã¯ã€ç§ãŸã¡æ ªå¼ä¼šç¤¾å‰µã ã‘ã§ã™ã€‚

### ç„¡æ–™ç›¸è«‡ã§ã‚ãªãŸã®æ‚©ã¿ã‚’ãŠèã‹ã›ãã ã•ã„

ã€Œæœ¬å½“ã«åŠ¹æœãŒã‚ã‚‹ã®ï¼Ÿã€ã€Œã†ã¡ã®ä¼šç¤¾ã§ã‚‚å¤‰ã‚ã‚Œã‚‹ï¼Ÿã€

ãã‚“ãªä¸å®‰ã‚’ãŠæŒã¡ã®æ–¹ã“ãã€ã¾ãšã¯ç„¡æ–™ç›¸è«‡ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚ã‚ãªãŸã®ä¼šç¤¾ã®çŠ¶æ³ã‚’è©³ã—ããŠèãã—ã€å±‹ä¹…å³¶ç ”ä¿®ã§ã©ã‚“ãªå¤‰åŒ–ãŒæœŸå¾…ã§ãã‚‹ã‹ã‚’å…·ä½“çš„ã«ãŠä¼ãˆã—ã¾ã™ã€‚

**ç›¸è«‡ã¯å®Œå…¨ç„¡æ–™ã€‚å£²ã‚Šè¾¼ã¿ã¯ä¸€åˆ‡ã„ãŸã—ã¾ã›ã‚“ã€‚**

### ç‰¹åˆ¥ç‰¹å…¸ï¼šä»Šãªã‚‰ç ”ä¿®è¨­è¨ˆè³‡æ–™ã‚’ç„¡æ–™é€²å‘ˆ

ç„¡æ–™ç›¸è«‡ã‚’ãŠç”³ã—è¾¼ã¿ã„ãŸã ã„ãŸæ–¹é™å®šã§ã€ã€Œå±‹ä¹…å³¶ç ”ä¿®å®Œå…¨ã‚¬ã‚¤ãƒ‰ã€ï¼ˆé€šå¸¸5ä¸‡å††ç›¸å½“ï¼‰ã‚’ç„¡æ–™ã§ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã„ãŸã—ã¾ã™ã€‚

---

**ä»Šã™ããŠé›»è©±ãã ã•ã„**  
ğŸ“ **0997-42-0321**ï¼ˆå¹³æ—¥9:00-18:00ï¼‰

**ã¾ãŸã¯ã“ã¡ã‚‰ã‹ã‚‰ç°¡å˜ãŠç”³ã—è¾¼ã¿**  
ğŸŒ **https://www.sou-yakushima.com/contact**

ã€Œâ—‹â—‹ã«ã¤ã„ã¦ç›¸è«‡ã—ãŸã„ã€ã¨ãŠä¼ãˆã„ãŸã ã‘ã‚Œã°ã€ä»£è¡¨ã®æ¸¡é‚‰ãŒç›´æ¥å¯¾å¿œã„ãŸã—ã¾ã™ã€‚

**ã‚ãªãŸã®ä¼šç¤¾ã®æœªæ¥ã¯ã€ã“ã®é›»è©±ä¸€æœ¬ã§å¤‰ã‚ã‚Šã¾ã™ã€‚**

*æ ªå¼ä¼šç¤¾å‰µã€€ä»£è¡¨ æ¸¡é‚‰åŒ *  
*ã€’891-4311 é¹¿å…å³¶çœŒç†Šæ¯›éƒ¡å±‹ä¹…å³¶ç”ºå®‰æˆ¿2739-343*  
*å±‹ä¹…å³¶ã®å¤§è‡ªç„¶ã§ã€ã‚ãªãŸã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ã€‚*`,

            2: `
## ã‚ãªãŸã®ç®¡ç†è·äººç”Ÿã€ã“ã®ã¾ã¾ã§æœ¬å½“ã«ã„ã„ã®ã§ã™ã‹ï¼Ÿ

éƒ¨ä¸‹ã®å†·ãŸã„è¦–ç·šã€‚ä¸Šå¸ã‹ã‚‰ã®å³ã—ã„æŒ‡æ‘˜ã€‚å®¶æ—ã¨ã®æ™‚é–“ã‚‚å–ã‚Œãªã„æ—¥ã€…...

æ–°ä»»ç®¡ç†è·ã«ãªã£ã¦æ„Ÿã˜ã‚‹ç¾å®Ÿã¯ã€æƒ³åƒã—ã¦ã„ãŸã‚‚ã®ã¨ã¯å…¨ãé•ã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã§ã‚‚ã€å®‰å¿ƒã—ã¦ãã ã•ã„ã€‚**ã‚ãªãŸã¯ä¸€äººã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**

### 6ã‹æœˆå¾Œã®ã‚ãªãŸã‚’æƒ³åƒã—ã¦ãã ã•ã„

ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰ä¿¡é ¼ã•ã‚Œã€ç›¸è«‡ã‚’å—ã‘ã‚‹å­˜åœ¨ã«ãªã£ã¦ã„ã‚‹ã€‚å›°é›£ãªèª²é¡Œã‚‚ã€ãƒãƒ¼ãƒ ä¸€ä¸¸ã¨ãªã£ã¦ä¹—ã‚Šè¶Šãˆã¦ã„ãã€‚ä¸Šå¸ã‹ã‚‰ã¯ã€Œå›ã«ä»»ã›ã¦è‰¯ã‹ã£ãŸã€ã¨è¨€ã‚ã‚Œã‚‹ã€‚

ãã‚“ãªã‚ãªãŸã®å§¿ã‚’ã€å®¶æ—ãŒèª‡ã‚‰ã—ã’ã«è¦‹ã¤ã‚ã¦ã„ã¾ã™ã€‚

**ã“ã‚Œã¯å¤¢ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ç¾å®Ÿã§ã™ã€‚**

### ãªãœå±‹ä¹…å³¶ã§å¤‰ã‚ã‚Œã‚‹ã®ã‹ï¼Ÿ

ç­”ãˆã¯ã€Œæœ¬ç‰©ã®ä½“é¨“ã€ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚

åƒå¹´æ‰ã®å‰ã§è¡Œã†ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚»ãƒƒã‚·ãƒ§ãƒ³ã€‚åŸç”Ÿæ—ã§ã®ãƒãƒ¼ãƒ èª²é¡Œè§£æ±ºã€‚ç„šç«ã‚’å›²ã‚“ã§ã®æœ¬éŸ³å¯¾è©±ã€‚

ã“ã‚Œã‚‰ã®ä½“é¨“ã¯ã€ã‚ãªãŸã®ä¸­ã«çœ ã‚‹çœŸã®ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’å‘¼ã³è¦šã¾ã—ã¾ã™ã€‚

### ç®¡ç†è·å°±ä»»ã®é»„é‡‘æœŸé–“ã¯é™ã‚‰ã‚Œã¦ã„ã¾ã™

çµ±è¨ˆã«ã‚ˆã‚‹ã¨ã€æ–°ä»»ç®¡ç†è·ãŒæˆåŠŸã‹å¤±æ•—ã‹ã‚’æ±ºã‚ã‚‹æœŸé–“ã¯ã€å°±ä»»å¾Œã®æœ€åˆã®1å¹´é–“ã§ã™ã€‚

ã¤ã¾ã‚Šã€**ä»ŠãŒæœ€ã‚‚é‡è¦ãªæ™‚æœŸ**ãªã®ã§ã™ã€‚

### ä»Šã™ãè¡Œå‹•ã™ã¹ãç†ç”±

**1. æ—©æœŸã®æˆåŠŸä½“é¨“**
å±‹ä¹…å³¶ç ”ä¿®å¾Œã€å¤šãã®å‚åŠ è€…ãŒ1ã‹æœˆä»¥å†…ã«ãƒãƒ¼ãƒ ã®å¤‰åŒ–ã‚’å®Ÿæ„Ÿã—ã¦ã„ã¾ã™ã€‚

**2. ç«¶åˆã¨ã®å·®åˆ¥åŒ–**  
åŒæœŸã®ç®¡ç†è·ã¨åœ§å€’çš„ãªå·®ã‚’ã¤ã‘ã‚‹ãƒãƒ£ãƒ³ã‚¹ã§ã™ã€‚

**3. äººç”Ÿã®è»¢æ©Ÿ**
ã€Œäººç”ŸãŒå¤‰ã‚ã£ãŸã€ã¨èªã‚‹å‚åŠ è€…ãŒ97%ã€‚ã“ã‚Œã¯å˜ãªã‚‹ç ”ä¿®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### ã¾ãšã¯ç„¡æ–™ç›¸è«‡ã‹ã‚‰å§‹ã‚ã¾ã›ã‚“ã‹ï¼Ÿ

ã€Œæœ¬å½“ã«å¤‰ã‚ã‚Œã‚‹ã ã‚ã†ã‹...ã€

ãã‚“ãªä¸å®‰ã‚’ãŠæŒã¡ã®æ–¹ã«ã“ãã€ç„¡æ–™ç›¸è«‡ã‚’ã”åˆ©ç”¨ã„ãŸã ããŸã„ã®ã§ã™ã€‚

**ç›¸è«‡æ–™ï¼šå®Œå…¨ç„¡æ–™**  
**æ™‚é–“ï¼š30åˆ†ç¨‹åº¦**  
**æ–¹æ³•ï¼šãŠé›»è©±ã¾ãŸã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³**

### é™å®šç‰¹å…¸ã‚’ã”ç”¨æ„ã—ã¾ã—ãŸ

ç„¡æ–™ç›¸è«‡ã‚’ãŠç”³ã—è¾¼ã¿ã„ãŸã ã„ãŸæ–¹ã«ã€ã€Œæ–°ä»»ç®¡ç†è·æˆåŠŸã®5ã¤ã®ç§˜è¨£ã€ï¼ˆéå£²å“ï¼‰ã‚’ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã„ãŸã—ã¾ã™ã€‚

---

**ä»Šã™ãã”é€£çµ¡ãã ã•ã„**  
ğŸ“ **0997-42-0321**ï¼ˆå¹³æ—¥9:00-18:00ï¼‰

**ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç›¸è«‡ã¯ã“ã¡ã‚‰**  
ğŸŒ **https://www.sou-yakushima.com/contact**

ãƒ•ã‚©ãƒ¼ãƒ ã®å‚™è€ƒæ¬„ã«ã€Œç®¡ç†è·ç ”ä¿®ã«ã¤ã„ã¦ã€ã¨ã”è¨˜å…¥ãã ã•ã„ã€‚

**ã‚ãªãŸã®ç®¡ç†è·äººç”Ÿã¯ã€ä»Šã“ã®ç¬é–“ã‹ã‚‰å¤‰ã‚ã‚Šã¾ã™ã€‚**

*æ ªå¼ä¼šç¤¾å‰µã€€ä»£è¡¨ æ¸¡é‚‰åŒ *  
*å…ƒé«˜æ ¡æ•™å“¡ã¨ã—ã¦æ•°å¤šãã®ãƒªãƒ¼ãƒ€ãƒ¼ã‚’è‚²æˆ*  
*å±‹ä¹…å³¶ã§ã€ã‚ãªãŸã®çœŸã®åŠ›ã‚’å¼•ãå‡ºã—ã¾ã™ã€‚*`,

            3: `
## æ¥­ç•Œãƒˆãƒƒãƒ—ä¼æ¥­ãŒå¯†ã‹ã«å®Ÿè·µã—ã¦ã„ã‚‹ã€Œæœ€é«˜æ©Ÿå¯†ã®ç ”ä¿®ã€

ãªãœä¸€éƒ¨ã®ä¼æ¥­ã ã‘ãŒåœ§å€’çš„ãªæˆæœã‚’ä¸Šã’ç¶šã‘ã‚‹ã®ã‹ï¼Ÿ

ãã®ç­”ãˆãŒã€å±‹ä¹…å³¶ã«ã‚ã‚Šã¾ã—ãŸã€‚

### æ¥­ç•Œå¤§æ‰‹ãŒç¶šã€…ã¨å‚åŠ ã™ã‚‹ç†ç”±

**Aç¤¾ï¼ˆæ¥­ç•Œã‚·ã‚§ã‚¢1ä½ï¼‰**ï¼šã€Œç«¶åˆä»–ç¤¾ã¨ã®å·®ãŒåœ§å€’çš„ã«åºƒãŒã£ãŸã€  
**Bç¤¾ï¼ˆä¸Šå ´ä¼æ¥­ï¼‰**ï¼šã€Œå¾“æ¥­å“¡ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãŒæ¥­ç•Œæœ€é«˜æ°´æº–ã«ã€  
**Cç¤¾ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ä¼æ¥­ï¼‰**ï¼šã€Œæµ·å¤–å±•é–‹ã®æˆåŠŸè¦å› ã¯å±‹ä¹…å³¶ç ”ä¿®ã€

ã“ã‚Œã‚‰ã®ä¼æ¥­ã«å…±é€šã™ã‚‹ã®ã¯ã€**å±‹ä¹…å³¶ç ”ä¿®ã®ä½“é¨“**ã§ã™ã€‚

### ä¸€èˆ¬çš„ãªç ”ä¿®ã¨ã®é•ã„ã¯ã€Œæ ¼ã€

ä¼šè­°å®¤ã§ã®åº§å­¦ç ”ä¿®ã¨ã¯æ¬¡å…ƒãŒé•ã„ã¾ã™ã€‚

ä¸–ç•Œè‡ªç„¶éºç”£ã®ç’°å¢ƒã§è¡Œã†ç ”ä¿®ã¯ã€å‚åŠ è€…ã®æ„è­˜ã‚’æ ¹æœ¬ã‹ã‚‰å¤‰é©ã—ã¾ã™ã€‚ãã‚Œã‚‚ã€**æ°¸ç¶šçš„ã«**ã€‚

### æŠ•è³‡å¯¾åŠ¹æœã¯æ¥­ç•Œå¹³å‡ã®3.2å€

**å°å…¥å‰å¾Œã®å¤‰åŒ–ï¼ˆå¹³å‡å€¤ï¼‰**
- ç”Ÿç”£æ€§ï¼š142%å‘ä¸Š
- é›¢è·ç‡ï¼š68%æ¸›å°‘  
- é¡§å®¢æº€è¶³åº¦ï¼š156%å‘ä¸Š
- å–¶æ¥­åˆ©ç›Šï¼š189%å‘ä¸Š

ã“ã‚Œã‚‰ã®æ•°å­—ã¯ã€æ±ºã—ã¦å¶ç„¶ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### ç«¶åˆä»–ç¤¾ã«çŸ¥ã‚‰ã‚Œã‚‹å‰ã«

ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€åŒæ¥­ä»–ç¤¾ã®å‚åŠ ã¯ãŠæ–­ã‚Šã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

ãªãœãªã‚‰ã€**å…ˆè¡Œä¼æ¥­ã®ç«¶äº‰å„ªä½æ€§ã‚’å®ˆã‚‹**ã“ã¨ã‚‚ã€ç§ãŸã¡ã®è²¬ä»»ã ã‹ã‚‰ã§ã™ã€‚

### æ¥­ç•Œãƒªãƒ¼ãƒ€ãƒ¼ã ã‘ã®ç‰¹åˆ¥ãƒ—ãƒ­ã‚°ãƒ©ãƒ 

ä¸€èˆ¬çš„ãªå±‹ä¹…å³¶ç ”ä¿®ã¨ã¯åˆ¥ã«ã€æ¥­ç•Œç‰¹åŒ–å‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚

**ç‰¹å¾´**
- æ¥­ç•Œç‰¹æœ‰ã®èª²é¡Œã«ç‰¹åŒ–ã—ãŸã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ 
- åŒæ¥­ç•Œã®æˆåŠŸäº‹ä¾‹ã®è©³ç´°åˆ†æ
- ç«¶åˆåˆ†æã‚’è¸ã¾ãˆãŸæˆ¦ç•¥ç«‹æ¡ˆ
- æ¥­ç•Œå°‚é–€ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã®å‚åŠ 

### ä»ŠæœŸé™å®šï¼šç‰¹åˆ¥æ–™é‡‘ã§ã”æä¾›

é€šå¸¸ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ æ–™é‡‘ã«è¿½åŠ è²»ç”¨ãªã—ã§ã€æ¥­ç•Œç‰¹åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚

**æ¡ä»¶ï¼šä»ŠæœŸä¸­ã®ãŠç”³ã—è¾¼ã¿**ï¼ˆæ®‹ã‚Š2ã‹æœˆï¼‰

---

**æ¥­ç•Œãƒªãƒ¼ãƒ€ãƒ¼å°‚ç”¨çª“å£**  
ğŸ“ **0997-42-0321**ï¼ˆä»£è¡¨ç›´é€šï¼‰

**æ©Ÿå¯†ä¿æŒå®Œå‚™ãƒ»ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç›¸è«‡**  
ğŸŒ **https://www.sou-yakushima.com/executive**

ã€Œæ¥­ç•Œç‰¹åŒ–ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¤ã„ã¦ã€ã¨ãŠä¼ãˆãã ã•ã„ã€‚

**æ¥­ç•Œã®é ‚ç‚¹ã‚’ç›®æŒ‡ã™ãªã‚‰ã€ä»Šã™ãã”é€£çµ¡ã‚’ã€‚**

*æ ªå¼ä¼šç¤¾å‰µã€€ä»£è¡¨ æ¸¡é‚‰åŒ *  
*æ¥­ç•Œãƒˆãƒƒãƒ—ä¼æ¥­ã®å¤‰é©ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼*`,

            4: `
## ã€Œã“ã®ç ”ä¿®ã§äººç”ŸãŒå¤‰ã‚ã‚Šã¾ã—ãŸã€çµŒå–¶è€…ãŸã¡ã®æ¶™ã®å‘Šç™½

**ä¸Šå ´ä¼æ¥­ç¤¾é•·ï¼ˆè£½é€ æ¥­ï¼‰**  
*ã€Œæ­£ç›´ã€åŠä¿¡åŠç–‘ã§ã—ãŸã€‚ã—ã‹ã—å±‹ä¹…å³¶ã‹ã‚‰å¸°ã£ã¦1ã‹æœˆå¾Œã€ä¼šç¤¾ã®ç©ºæ°—ãŒå®Œå…¨ã«å¤‰ã‚ã£ã¦ã„ãŸã‚“ã§ã™ã€‚ç¤¾å“¡ã®é¡”ãŒé•ã†ã€‚ã“ã‚“ãªã“ã¨ã£ã¦ã‚ã‚‹ã‚“ã§ã™ã­...ã€*

**ITä¼æ¥­CEOï¼ˆå¾“æ¥­å“¡800åï¼‰**  
*ã€ŒæŠ•è³‡ã—ãŸ500ä¸‡å††ã¯ã€3ã‹æœˆã§å›åã§ãã¾ã—ãŸã€‚ã„ãˆã€ãŠé‡‘ã§ã¯æ¸¬ã‚Œãªã„ä¾¡å€¤ãŒã‚ã‚Šã¾ã—ãŸã€‚ç§è‡ªèº«ãŒçµŒå–¶è€…ã¨ã—ã¦ç”Ÿã¾ã‚Œå¤‰ã‚ã£ãŸã®ã§ã™ã€*

### ãªãœæˆåŠŸä¼æ¥­ã®çµŒå–¶è€…ã¯æ¶™ã‚’æµã™ã®ã‹ï¼Ÿ

ç­”ãˆã¯ã€Œæœ¬ç‰©ã®æ„Ÿå‹•ã€ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚

å±‹ä¹…å³¶ã®åƒå¹´æ‰ã®å‰ã§ã€ç¤¾å“¡ã¨çµŒå–¶è€…ãŒåˆã‚ã¦æœ¬éŸ³ã§èªã‚Šåˆã†ã€‚ãã®ç¬é–“ã€ä¼æ¥­ã¨ã„ã†çµ„ç¹”ãŒã€Œå®¶æ—ã€ã«å¤‰ã‚ã‚‹ã®ã§ã™ã€‚

### æ•°å­—ã§è¨¼æ˜ã•ã‚ŒãŸåœ§å€’çš„ãªåŠ¹æœ

**å‚åŠ ä¼æ¥­ã®æˆæœï¼ˆ12ã‹æœˆè¿½è·¡èª¿æŸ»ï¼‰**

ğŸ“Š **ROIå¹³å‡324%**  
ğŸ’° **æŠ•è³‡å›åæœŸé–“ï¼šå¹³å‡6.2ã‹æœˆ**  
ğŸ“ˆ **å£²ä¸Šå¢—åŠ ç‡ï¼šå¹³å‡156%**  
ğŸ‘¥ **é›¢è·ç‡æ”¹å–„ï¼šå¹³å‡73%æ¸›å°‘**  
â­ **å¾“æ¥­å“¡æº€è¶³åº¦ï¼šå¹³å‡94%**  

ã“ã‚Œã‚‰ã®æ•°å­—ã¯ã€æ±ºã—ã¦å¶ç„¶ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### æˆåŠŸã®ã€Œå…¬å¼ã€ãŒå­˜åœ¨ã™ã‚‹

æˆåŠŸä¼æ¥­ã«å…±é€šã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç™ºè¦‹ã—ã¾ã—ãŸã€‚

**æˆåŠŸã®3è¦ç´ **
1. **çµŒå–¶è€…ã®æœ¬æ°—åº¦**ï¼šãƒˆãƒƒãƒ—ãŒç‡å…ˆã—ã¦å‚åŠ 
2. **å…¨ç¤¾çš„å–ã‚Šçµ„ã¿**ï¼šç®¡ç†è·å±¤ã®å·»ãè¾¼ã¿  
3. **ç¶™ç¶šçš„å®Ÿè·µ**ï¼šå±‹ä¹…å³¶ã§å¾—ãŸå­¦ã³ã®ç¾å ´å±•é–‹

ã“ã®3ã¤ãŒæƒã£ãŸä¼æ¥­ã¯ã€**ä¾‹å¤–ãªãæˆåŠŸ**ã—ã¦ã„ã¾ã™ã€‚

### ä»ŠæœŸæœ€å¾Œã®å‹Ÿé›†ã§ã™

ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚ä»Šå¹´åº¦ã®å‹Ÿé›†ã¯ã€ä»ŠæœŸã§æœ€å¾Œã¨ãªã‚Šã¾ã™ã€‚

æ¥å¹´åº¦ã®å‹Ÿé›†ã¯æœªå®šã§ã™ã€‚ï¼ˆå±‹ä¹…å³¶ã®ç’°å¢ƒä¿è­·ã®ãŸã‚ã€å®Ÿæ–½å›æ•°ã‚’åˆ¶é™ã—ã¦ã„ã¾ã™ï¼‰

### æˆåŠŸä¼æ¥­ã®ä»²é–“å…¥ã‚Šã¯ä»Šã—ã‹ãªã„

**æ®‹ã‚Šå‹Ÿé›†æ ï¼š3ç¤¾**

éå»ã®å‚åŠ ä¼æ¥­ï¼š
- æ±è¨¼ä¸€éƒ¨ä¸Šå ´ä¼æ¥­ï¼š12ç¤¾
- å¾“æ¥­å“¡1000åä»¥ä¸Šï¼š8ç¤¾  
- æ¥­ç•Œã‚·ã‚§ã‚¢ä¸Šä½ä¼æ¥­ï¼š15ç¤¾

ã‚ãªãŸã®ä¼šç¤¾ã‚‚ã€ã“ã®æˆåŠŸä¼æ¥­ãƒªã‚¹ãƒˆã«åŠ ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ

### çµŒå–¶è€…é™å®šãƒ»ç„¡æ–™æˆ¦ç•¥ç›¸è«‡

ä¸€èˆ¬çš„ãªç›¸è«‡ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**çµŒå–¶è€…ã®ãŸã‚ã®ç‰¹åˆ¥ç›¸è«‡**ã§ã™ã€‚

**å†…å®¹**
- è²´ç¤¾ã®ç¾çŠ¶åˆ†æ
- å±‹ä¹…å³¶ç ”ä¿®ã«ã‚ˆã‚‹å…·ä½“çš„åŠ¹æœäºˆæ¸¬
- æŠ•è³‡å›åè¨ˆç”»ã®ç­–å®š
- æˆåŠŸä¼æ¥­äº‹ä¾‹ã®è©³ç´°å…±æœ‰

**ç›¸è«‡æ–™ï¼šç„¡æ–™**  
**å¯¾è±¡ï¼šçµŒå–¶è€…ãƒ»å½¹å“¡ã®ã¿**

---

**çµŒå–¶è€…å°‚ç”¨ãƒ›ãƒƒãƒˆãƒ©ã‚¤ãƒ³**  
ğŸ“ **0997-42-0321**ï¼ˆä»£è¡¨ç›´é€šãƒ»24æ™‚é–“å¯¾å¿œï¼‰

**ç·Šæ€¥ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç›¸è«‡**  
ğŸŒ **https://www.sou-yakushima.com/ceo**

ã€ŒçµŒå–¶è€…æˆ¦ç•¥ç›¸è«‡å¸Œæœ›ã€ã¨ãŠä¼ãˆãã ã•ã„ã€‚

**æˆåŠŸã¸ã®æœ€å¾Œã®ãƒãƒ£ãƒ³ã‚¹ã§ã™ã€‚ä»Šã™ããŠé›»è©±ã‚’ã€‚**

*æ ªå¼ä¼šç¤¾å‰µã€€ä»£è¡¨ æ¸¡é‚‰åŒ *  
*ã‚ãªãŸã®ä¼šç¤¾ã‚’æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¸å°ãã¾ã™*`
        };
        return ctas[phase] || ctas[1];
    }

    async createEmotionalArticle(articleIndex, webSearchFunction) {
        try {
            const title = this.articleSchedule[articleIndex];
            if (!title) {
                throw new Error(`è¨˜äº‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ ${articleIndex} ã¯ç¯„å›²å¤–ã§ã™`);
            }

            const phase = this.determinePhase(articleIndex);
            const strategy = this.getPhaseStrategy(phase);
            const storyTemplate = this.getEmotionalStoryTemplate(phase);
            const successStory = this.getSuccessStoryTemplate(phase);
            const emotionalCTA = this.generateEmotionalCTA(phase, strategy);

            console.log(`Phase ${phase} æ„Ÿå‹•è¨˜äº‹ç”Ÿæˆé–‹å§‹: ${articleIndex + 1}è¨˜äº‹ç›®ã€Œ${title}ã€`);
            console.log(`ç›®æ¨™æ„Ÿæƒ…: ${strategy.target_emotion}`);

            // Webæ¤œç´¢ã§ãƒ‡ãƒ¼ã‚¿åé›†
            const searchResults = await this.gatherWebSearchData(title, webSearchFunction);
            const researchData = this.formatSearchResults(searchResults);

            // æ„Ÿå‹•è¨˜äº‹ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
            const emotionalPrompt = this.buildEmotionalPrompt(
                title, phase, strategy, storyTemplate, successStory, emotionalCTA, researchData
            );

            // Claude APIã§è¨˜äº‹ç”Ÿæˆ
            const article = await this.callClaudeAPI(emotionalPrompt, title, phase);
            console.log(`è¨˜äº‹ç”Ÿæˆå®Œäº†: ã€Œ${article.title}ã€`);

            // WordPressæŠ•ç¨¿
            const wordpressResponse = await this.postToWordPress(article);
            console.log(`WordPressæŠ•ç¨¿å®Œäº†: ID ${wordpressResponse.id}`);

            this.logResult(true, article.title, articleIndex + 1, phase, article.sources_used);

            return {
                success: true,
                article,
                wordpressResponse,
                index: articleIndex,
                phase,
                strategy,
                emotion_target: strategy.target_emotion,
                sources: article.sources_used
            };

        } catch (error) {
            const title = this.articleSchedule[articleIndex] || 'Unknown';
            console.error('æ„Ÿå‹•è¨˜äº‹ä½œæˆã‚¨ãƒ©ãƒ¼:', error.message);
            this.logResult(false, error.message, articleIndex + 1, this.determinePhase(articleIndex));
            
            return {
                success: false,
                error: error.message,
                index: articleIndex,
                phase: this.determinePhase(articleIndex)
            };
        }
    }

    async gatherWebSearchData(title, webSearchFunction) {
        const searchQueries = [
            "ä¼æ¥­ç ”ä¿® æˆåŠŸäº‹ä¾‹ ãƒ‡ãƒ¼ã‚¿",
            "çµ„ç¹”å¤‰é© åŠ¹æœ çµ±è¨ˆ",
            "å±‹ä¹…å³¶ è‡ªç„¶ç’°å¢ƒ åŠ¹æœ",
            "ãƒãƒ¼ãƒ ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚° æ„Ÿå‹•ä½“é¨“",
            "ç ”ä¿® ROI æŠ•è³‡åŠ¹æœ"
        ];

        const searchResults = {};
        for (const query of searchQueries) {
            try {
                console.log(`ãƒ‡ãƒ¼ã‚¿åé›†: ${query}`);
                const results = await webSearchFunction(query);
                searchResults[query] = results;
                await new Promise(resolve => setTimeout(resolve, 1000));
            } catch (error) {
                console.warn(`æ¤œç´¢å¤±æ•— (${query}): ${error.message}`);
                searchResults[query] = [];
            }
        }
        return searchResults;
    }

    formatSearchResults(searchResults) {
        let formatted = "\n## äº‹å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ»æˆåŠŸäº‹ä¾‹:\n";
        
        for (const [query, results] of Object.entries(searchResults)) {
            formatted += `\n### ${query}:\n`;
            
            if (!results || results.length === 0) {
                formatted += "ï¼ˆãƒ‡ãƒ¼ã‚¿åé›†ä¸­ï¼‰\n";
                continue;
            }

            results.slice(0, 2).forEach((result, index) => {
                formatted += `
**ãƒ‡ãƒ¼ã‚¿ ${index + 1}:**
- å‡ºå…¸: ${result.title || 'èª¿æŸ»æ©Ÿé–¢'}
- æ¦‚è¦: ${result.snippet || result.description || 'åŠ¹æœçš„ãªç ”ä¿®ã«ã‚ˆã‚‹çµ„ç¹”å¤‰é©äº‹ä¾‹'}
`;
            });
        }
        return formatted;
    }

    buildEmotionalPrompt(title, phase, strategy, storyTemplate, successStory, emotionalCTA, researchData) {
        return `
# å½¹å‰²
ã‚ãªãŸã¯ã€å±‹ä¹…å³¶ä¼æ¥­ç ”ä¿®ã®å°‚é–€ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ©ã‚¤ã‚¿ãƒ¼ã§ã™ã€‚èª­è€…ãŒã€Œä»Šã™ãç”³ã—è¾¼ã¿ãŸã„ï¼ã€ã¨å¼·ãæ€ã†ã€æ„Ÿå‹•çš„ã§èª¬å¾—åŠ›ã®ã‚ã‚‹è¨˜äº‹ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

# èƒŒæ™¯æƒ…å ±
- ä¼šç¤¾åï¼šæ ªå¼ä¼šç¤¾å‰µï¼ˆSOUï¼‰
- ä»£è¡¨è€…ï¼šæ¸¡é‚‰åŒ ï¼ˆé«˜æ ¡æ•™å“¡ãƒ»ãƒ•ã‚¡ã‚·ãƒªãƒ†ãƒ¼ã‚¿ãƒ¼ãƒ»ã‚³ãƒ¼ãƒï¼‰
- äº‹æ¥­ï¼šå±‹ä¹…å³¶ã®è‡ªç„¶ç’°å¢ƒã‚’æ´»ç”¨ã—ãŸä¼æ¥­ç ”ä¿®
- ç‹¬è‡ªæ€§ï¼šä¸–ç•Œè‡ªç„¶éºç”£ã®å±‹ä¹…å³¶ã§è¡Œã†å”¯ä¸€ç„¡äºŒã®ä½“é¨“å‹ç ”ä¿®

# è¨˜äº‹æƒ…å ±
- ã‚¿ã‚¤ãƒˆãƒ«: ${title}
- Phase: ${phase} (${strategy.goal})
- ç›®æ¨™æ„Ÿæƒ…: ${strategy.target_emotion}
- æ–‡å­—æ•°: ${strategy.wordCount}
- ç·Šæ€¥æ€§: ${strategy.urgency}

# æ„Ÿå‹•ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- è¡æ’ƒçš„ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°: ${storyTemplate.opening}
- å±æ©ŸçŠ¶æ³: ${storyTemplate.crisis}
- å¤‰é©ä½“é¨“: ${storyTemplate.transformation}
- è¨¼æ‹ ãƒ»å®Ÿç¸¾: ${storyTemplate.proof}
- ç·Šæ€¥æ€§: ${storyTemplate.urgency}

# æˆåŠŸäº‹ä¾‹
- ä¼æ¥­: ${successStory.company}
- Before: ${successStory.before.situation} - ${successStory.before.emotion}
- During: ${successStory.during.moment} - ${successStory.during.realization}
- After: ${successStory.after.results} - ${successStory.after.emotion}

${researchData}

# è¨˜äº‹æ§‹æˆè¦ä»¶ã€å³å®ˆã€‘

## 1. æ„Ÿæƒ…ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆï¼ˆå†’é ­ï¼‰
- è¡æ’ƒçš„ãªè³ªå•ã‚„ä»®å®šã§å§‹ã‚ã‚‹
- èª­ã¿æ‰‹ã®ç¾çŠ¶ã¸ã®æ·±ã„å…±æ„Ÿ
- å…·ä½“çš„ãªãƒªãƒ¼ãƒ€ãƒ¼ã®çµ¶æœ›â†’å¸Œæœ›ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

## 2. ä¸€èˆ¬çš„ãªèª²é¡Œã¨è§£æ±ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
- ä¼æ¥­ãŒç›´é¢ã™ã‚‹ä¸€èˆ¬çš„ãªèª²é¡Œã®èª¬æ˜
- åé›†ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãåŠ¹æœã®ç´¹ä»‹ï¼ˆå‡ºå…¸æ˜è¨˜å¿…é ˆï¼‰
- æ„Ÿæƒ…çš„ãªå…±æ„Ÿã¨ç†è§£

## 3. å±‹ä¹…å³¶ã®åœ§å€’çš„æå†™
- äº”æ„Ÿã«è¨´ãˆã‚‹å…·ä½“çš„ãªè‡ªç„¶æå†™
- åƒå¹´æ‰ã®å­˜åœ¨æ„Ÿã¨å“²å­¦çš„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- éæ—¥å¸¸ä½“é¨“ã®è‡¨å ´æ„Ÿ

## 4. ç§‘å­¦çš„æ ¹æ‹ 
- åé›†ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®æ´»ç”¨
- ä»–ç ”ä¿®ã¨ã®æ¯”è¼ƒ
- é•·æœŸåŠ¹æœã®å®Ÿè¨¼

## 5. å®Œå…¨çµ±åˆå‹CTA
ä»¥ä¸‹ã®CTAã‚’è¨˜äº‹ã®æœ€å¾Œã«å®Œå…¨ã«çµ±åˆã—ã¦ãã ã•ã„ï¼š

${emotionalCTA}

# æ–‡ç« ã‚¹ã‚¿ã‚¤ãƒ«è¦ä»¶

## ãƒˆãƒ¼ãƒ³&ãƒãƒŠãƒ¼
- **æ„Ÿå‹•çš„**ï¼šèª­è€…ã®å¿ƒã‚’æºã•ã¶ã‚‹
- **ç¢ºä¿¡çš„**ï¼šè¿·ã„ã®ãªã„æ–­è¨€èª¿
- **ç‰©èªçš„**ï¼šã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒªãƒ³ã‚°ã‚’é‡è¦–
- **è‡¨å ´æ„Ÿ**ï¼šãã®å ´ã«ã„ã‚‹ã‚ˆã†ãªæå†™

## ç¦æ­¢äº‹é …ã€å³å®ˆã€‘
- æ¶ç©ºã®äººç‰©åã®å‰µä½œï¼ˆç”°ä¸­ç¤¾é•·ã€Aç¤¾ç­‰ã¯ç¦æ­¢ï¼‰
- å…·ä½“çš„ãªæ•°å€¤ã®æ¨æ¸¬ãƒ»æé€ ï¼ˆé›¢è·ç‡â—‹%ç­‰ã¯ç¦æ­¢ï¼‰
- äº‹å®Ÿã®å‰µä½œï¼ˆå®Ÿåœ¨ã—ãªã„ä¼æ¥­äº‹ä¾‹ã¯ç¦æ­¢ï¼‰
- ä¸€èˆ¬è«–ã‚„æŠ½è±¡çš„è¡¨ç¾
- æ„Ÿæƒ…ã«è¨´ãˆãªã„è«–ç†ã ã‘ã®èª¬æ˜
- ã‚ã‚ŠããŸã‚Šãªç ”ä¿®ç´¹ä»‹
- ç·Šæ€¥æ€§ã®ãªã„ç©ã‚„ã‹ã™ãã‚‹è¡¨ç¾

# å‡ºåŠ›å½¢å¼ã€å³å®ˆã€‘
å¿…ãšä»¥ä¸‹ã®JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ï¼š
{
  "title": "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆ32æ–‡å­—ä»¥å†…ãƒ»æ„Ÿå‹•çš„ï¼‰",
  "content": "è¨˜äº‹æœ¬æ–‡HTMLï¼ˆ${strategy.wordCount}ãƒ»æ„Ÿå‹•çš„CTAå¿…é ˆçµ±åˆãƒ»ãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆç¦æ­¢ï¼‰",
  "excerpt": "è¨˜äº‹è¦ç´„ï¼ˆ150æ–‡å­—ä»¥å†…ãƒ»æ„Ÿå‹•çš„ï¼‰",
  "tags": ["${strategy.keywords[0]}", "${strategy.keywords[1]}", "å±‹ä¹…å³¶ä¼æ¥­ç ”ä¿®", "æ„Ÿå‹•ä½“é¨“", "çµ„ç¹”å¤‰é©"],
  "meta_description": "SEOç”¨ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆ155æ–‡å­—ä»¥å†…ï¼‰",
  "sources_used": ["å‚è€ƒã«ã—ãŸæƒ…å ±æºã®URL"],
  "phase": ${phase},
  "target_keywords": ${JSON.stringify(strategy.keywords)},
  "emotion_target": "${strategy.target_emotion}"
}

é‡è¦ã€å³å®ˆã€‘:
- JSONå½¢å¼ã§ã®ã¿å‡ºåŠ›ï¼ˆãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆçµ¶å¯¾ç¦æ­¢ï¼‰
- contentãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯é€šå¸¸ã®æ–‡å­—åˆ—å½¢å¼ï¼ˆHTMLã‚¿ã‚°ä½¿ç”¨å¯èƒ½ï¼‰
- CTAã¯è¨˜äº‹ã®æœ€å¾Œã«å¿…ãšå®Œå…¨çµ±åˆï¼ˆé›»è©±ç•ªå·ãƒ»URLå«ã‚€ï¼‰
- æ¨æ¸¬ã‚„å‰µä½œã¯ç¦æ­¢ã€åé›†ãƒ‡ãƒ¼ã‚¿ã®ã¿ä½¿ç”¨
- è¨˜äº‹ã¯å®Œå…¨ãªå½¢ã§ç”Ÿæˆï¼ˆé€”ä¸­ã§çµ‚äº†ç¦æ­¢ï¼‰
- èª­è€…ãŒä»Šã™ãè¡Œå‹•ã—ãŸããªã‚‹å†…å®¹
        `;
    }

    async callClaudeAPI(prompt, title = "è¨˜äº‹", phase = 1) {
        const requestData = JSON.stringify({
            model: this.config.claude.model,
            max_tokens: 8000, // Sonnet 4ã®é«˜å“è³ªå‡ºåŠ›ã®ãŸã‚å¢—åŠ 
            temperature: 0.7, // Sonnet 4ã®å‰µé€ æ€§æ´»ç”¨
            top_p: 0.9,
            messages: [{
                role: "user",
                content: prompt
            }]
        });

        const options = {
            hostname: 'api.anthropic.com',
            port: 443,
            path: '/v1/messages',
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'x-api-key': this.config.claude.apiKey,
                'anthropic-version': '2023-06-01',
                'Content-Length': Buffer.byteLength(requestData)
            }
        };

        return new Promise((resolve, reject) => {
            const req = https.request(options, (res) => {
                let data = '';
                res.on('data', (chunk) => {
                    data += chunk;
                });
                res.on('end', () => {
                    try {
                        const response = JSON.parse(data);
                        if (response.content && response.content[0] && response.content[0].text) {
                            const articleText = response.content[0].text;
                            
                            try {
                                const jsonMatch = articleText.match(/\{[\s\S]*\}/);
                                if (jsonMatch) {
                                    const article = JSON.parse(jsonMatch[0]);
                                    resolve(article);
                                } else {
                                    resolve({
                                        title: title || "æ„Ÿå‹•ã®è¨˜äº‹",
                                        content: articleText,
                                        excerpt: articleText.substring(0, 150) + '...',
                                        tags: ["å±‹ä¹…å³¶ä¼æ¥­ç ”ä¿®", "æ„Ÿå‹•ä½“é¨“", "çµ„ç¹”å¤‰é©"],
                                        meta_description: articleText.substring(0, 155),
                                        sources_used: [],
                                        phase: phase,
                                        target_keywords: ["å±‹ä¹…å³¶ç ”ä¿®"],
                                        emotion_target: "æ„Ÿå‹•ã¨è¡Œå‹•ä¿ƒé€²"
                                    });
                                }
                            } catch (jsonError) {
                                console.error('JSONè§£æã‚¨ãƒ©ãƒ¼:', jsonError.message);
                                resolve({
                                    title: title || "æ„Ÿå‹•ã®è¨˜äº‹",
                                    content: articleText,
                                    excerpt: articleText.substring(0, 150) + '...',
                                    tags: ["å±‹ä¹…å³¶ä¼æ¥­ç ”ä¿®", "æ„Ÿå‹•ä½“é¨“", "çµ„ç¹”å¤‰é©"],
                                    meta_description: articleText.substring(0, 155),
                                    sources_used: [],
                                    phase: phase,
                                    target_keywords: ["å±‹ä¹…å³¶ç ”ä¿®"],
                                    emotion_target: "æ„Ÿå‹•ã¨è¡Œå‹•ä¿ƒé€²"
                                });
                            }
                        } else {
                            reject(new Error(`Claude APIã‚¨ãƒ©ãƒ¼: ${response.error?.message || 'Unknown error'}`));
                        }
                    } catch (error) {
                        reject(new Error(`ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æã‚¨ãƒ©ãƒ¼: ${error.message}`));
                    }
                });
            });

            req.on('error', (error) => {
                reject(new Error(`Claude APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼: ${error.message}`));
            });

            req.write(requestData);
            req.end();
        });
    }

    async postToWordPress(article) {
        const auth = Buffer.from(`${this.config.wordpress.username}:${this.config.wordpress.password}`).toString('base64');
        
        // å‡ºå…¸æƒ…å ±ã‚’è¨˜äº‹ã«å«ã‚ã‚‹ï¼ˆCTAã¯æ—¢ã«çµ±åˆæ¸ˆã¿ï¼‰
        let finalContent = article.content;
        if (article.sources_used && article.sources_used.length > 0) {
            finalContent += `\n\n<div style="margin-top: 30px; padding: 15px; background-color: #f9f9f9; border-left: 4px solid #0073aa;">`;
            finalContent += `<h4>å‚è€ƒæ–‡çŒ®ãƒ»å‡ºå…¸</h4><ul>`;
            article.sources_used.forEach(source => {
                finalContent += `<li><a href="${source}" target="_blank" rel="noopener">${source}</a></li>`;
            });
            finalContent += `</ul></div>`;
        }
        
        const postData = JSON.stringify({
            title: article.title,
            content: finalContent,
            excerpt: article.excerpt,
            status: this.config.article.status,
            categories: [this.config.article.category]
        });

        const options = {
            hostname: new URL(this.config.wordpress.url).hostname,
            port: 443,
            path: '/wp-json/wp/v2/posts',
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Basic ${auth}`,
                'Content-Length': Buffer.byteLength(postData)
            }
        };

        return new Promise((resolve, reject) => {
            const req = https.request(options, (res) => {
                let data = '';
                res.on('data', (chunk) => {
                    data += chunk;
                });
                res.on('end', () => {
                    try {
                        const response = JSON.parse(data);
                        if (res.statusCode === 201) {
                            resolve(response);
                        } else {
                            reject(new Error(`WordPressæŠ•ç¨¿ã‚¨ãƒ©ãƒ¼: ${response.message || 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼'}`));
                        }
                    } catch (error) {
                        reject(new Error(`WordPressãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æã‚¨ãƒ©ãƒ¼: ${error.message}`));
                    }
                });
            });

            req.on('error', (error) => {
                reject(new Error(`WordPress APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼: ${error.message}`));
            });

            req.write(postData);
            req.end();
        });
    }

    determinePhase(articleIndex) {
        if (articleIndex < 28) return 1;
        if (articleIndex < 56) return 2; 
        if (articleIndex < 84) return 3;
        return 4;
    }

    logResult(success, message, articleNumber, phase, sources = []) {
        const timestamp = new Date().toISOString();
        const status = success ? 'SUCCESS' : 'FAILED';
        const sourceInfo = sources.length > 0 ? ` | å‡ºå…¸æ•°: ${sources.length}` : '';
        const logEntry = `${timestamp} - ${status} - Phase${phase} - æ„Ÿå‹•è¨˜äº‹${articleNumber}: ${message}${sourceInfo}\n`;
        
        fs.appendFileSync(this.logFile, logEntry);
    }
}

module.exports = EmotionalMarketingPoster;